#!/usr/bin/fish

function show_power_menu
    set -l menu_options "ÔÄ£ Lock" \
        "Û∞§Ñ Suspend" \
        "Û∞úâ Restart" \
        "Û∞ê• Shutdown" \
        "üöÄ Waybar restart" \
        "Û∞§® Wi-Fi" \
        "Ôäî Bluetooth" \
        "üóÇÔ∏è SMB Shares" \
        "ÔÄ® Sound" \
        "ÔÄ® Microphone" \
        "Ó¥Ø System Monitor" \
        "Û∞©à Exit session"

    # set -l selection (printf '%s\n' $menu_options | walker --dmenu)
    set -l selection (printf '%s\n' $menu_options | fuzzel --dmenu)

    switch "$selection"
        case "*Lock*"
            swaylock
        case "*Suspend*"
            systemctl suspend
        case "*Restart*"
            systemctl reboot
        case "*Shutdown*"
            systemctl poweroff
        case "*Wi-Fi*"
            ghostty --title=Impala --class=Impala -e impala
        case "*Waybar*"
            systemctl --user restart waybar.service
        case "*SMB*"
            ghostty --title="SMB Manager" --class=smb-tui -e ~/.local/bin/smb-tui
        case "*Sound*"
            ghostty --title=Wiremix --class=Wiremix -e wiremix -v output
        case "*Microphone*"
            ghostty --title=Wiremix --class=Wiremix -e wiremix -v input
        case "*Bluetooth*"
            ghostty --title=BlueTUI --class=bluetui -e bluetui
        case "*System*"
            ghostty --class=btop --title=btop -e btop
        case "*Exit*"
            niri msg action quit
    end
end

show_power_menu
